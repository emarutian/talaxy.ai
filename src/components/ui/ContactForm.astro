---
import { siteConfig } from '../../data/site-config';
---

<form
  action="https://api.web3forms.com/submit"
  method="POST"
  class="space-y-5"
  id="contact-form"
>
  <input type="hidden" name="access_key" value={siteConfig.web3formsKey} />
  <input type="hidden" name="subject" value="New inquiry from talaxy.ai" />
  <input type="hidden" name="from_name" value="Talaxy.ai Website" />
  <input type="checkbox" name="botcheck" class="hidden" style="display:none" aria-hidden="true" tabindex="-1" />

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
    <div>
      <label for="name" class="block text-sm font-medium text-silver-300 mb-2">Name <span class="text-gold-400">*</span></label>
      <input
        type="text"
        id="name"
        name="name"
        required
        placeholder="Your name"
        class="w-full px-4 py-3 bg-white/[0.04] border border-white/10 rounded-xl text-cream placeholder:text-silver-400/50 focus:outline-none focus:ring-2 focus:ring-gold-400/40 focus:border-transparent transition-all duration-200"
      />
    </div>
    <div>
      <label for="phone" class="block text-sm font-medium text-silver-300 mb-2">Phone <span class="text-gold-400">*</span></label>
      <input
        type="tel"
        id="phone"
        name="phone"
        required
        placeholder="(555) 123-4567"
        class="w-full px-4 py-3 bg-white/[0.04] border border-white/10 rounded-xl text-cream placeholder:text-silver-400/50 focus:outline-none focus:ring-2 focus:ring-gold-400/40 focus:border-transparent transition-all duration-200"
      />
    </div>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
    <div>
      <label for="email" class="block text-sm font-medium text-silver-300 mb-2">Email <span class="text-gold-400">*</span></label>
      <input
        type="email"
        id="email"
        name="email"
        required
        placeholder="you@company.com"
        class="w-full px-4 py-3 bg-white/[0.04] border border-white/10 rounded-xl text-cream placeholder:text-silver-400/50 focus:outline-none focus:ring-2 focus:ring-gold-400/40 focus:border-transparent transition-all duration-200"
      />
    </div>
    <div>
      <label for="company" class="block text-sm font-medium text-silver-300 mb-2">Company</label>
      <input
        type="text"
        id="company"
        name="company"
        placeholder="Company name"
        class="w-full px-4 py-3 bg-white/[0.04] border border-white/10 rounded-xl text-cream placeholder:text-silver-400/50 focus:outline-none focus:ring-2 focus:ring-gold-400/40 focus:border-transparent transition-all duration-200"
      />
    </div>
  </div>

  <div>
    <label for="message" class="block text-sm font-medium text-silver-300 mb-2">How can we help? <span class="text-gold-400">*</span></label>
    <textarea
      id="message"
      name="message"
      rows="4"
      required
      placeholder="Tell us about your team, challenges, and goals..."
      class="w-full px-4 py-3 bg-white/[0.04] border border-white/10 rounded-xl text-cream placeholder:text-silver-400/50 focus:outline-none focus:ring-2 focus:ring-gold-400/40 focus:border-transparent transition-all duration-200 resize-none"
    ></textarea>
  </div>

  <!-- SMS Consent Checkboxes -->
  <div class="space-y-3">
    <label class="flex items-start gap-3 cursor-pointer group">
      <input
        type="checkbox"
        name="sms_transactional_consent"
        value="yes"
        class="mt-1 w-4 h-4 rounded border-white/20 bg-white/[0.04] text-gold-400 focus:ring-gold-400/40 focus:ring-offset-0 shrink-0"
      />
      <span class="text-xs text-silver-400 leading-relaxed">
        I consent to receive transactional messages from <strong class="text-silver-300">Talaxy.ai</strong> at the phone number provided. Message frequency may vary. Message &amp; data rates may apply. Reply HELP for help or STOP to opt-out.
      </span>
    </label>

    <label class="flex items-start gap-3 cursor-pointer group">
      <input
        type="checkbox"
        name="sms_marketing_consent"
        value="yes"
        class="mt-1 w-4 h-4 rounded border-white/20 bg-white/[0.04] text-gold-400 focus:ring-gold-400/40 focus:ring-offset-0 shrink-0"
      />
      <span class="text-xs text-silver-400 leading-relaxed">
        I consent to receive marketing and promotional messages from <strong class="text-silver-300">Talaxy.ai</strong> at the phone number provided. Message frequency may vary. Message &amp; data rates may apply. Reply HELP for help or STOP to opt-out.
      </span>
    </label>
  </div>

  <button
    type="submit"
    class="w-full sm:w-auto inline-flex items-center justify-center px-8 py-3.5 text-sm font-semibold text-space-900 gold-gradient rounded-full hover:opacity-90 transition-opacity duration-200 focus:outline-none focus:ring-2 focus:ring-gold-400/50 focus:ring-offset-2 focus:ring-offset-space-900"
  >
    Design Your Workforce
    <svg class="ml-2 w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
    </svg>
  </button>

  <p class="text-xs text-silver-400/60 mt-3">
    By submitting this form, you consent to Talaxy.ai storing your information to respond to your inquiry. We will never share your data with third parties. View our <a href="/privacy" class="text-gold-400/80 hover:text-gold-300 underline">Privacy Policy</a> and <a href="/terms" class="text-gold-400/80 hover:text-gold-300 underline">Terms of Service</a>.
  </p>

  <div id="form-result" class="hidden mt-4 p-4 rounded-xl text-sm"></div>
</form>

<script>
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const result = document.getElementById('form-result') as HTMLElement;

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    result.classList.remove('hidden', 'bg-green-500/10', 'text-green-400', 'bg-red-500/10', 'text-red-400');

    try {
      const response = await fetch('https://api.web3forms.com/submit', {
        method: 'POST',
        body: formData,
      });
      const data = await response.json();

      if (data.success) {
        result.classList.add('bg-green-500/10', 'text-green-400');
        result.textContent = "Thank you! We'll be in touch within 24 hours.";
        form.reset();
      } else {
        result.classList.add('bg-red-500/10', 'text-red-400');
        result.textContent = 'Something went wrong. Please try again.';
      }
    } catch {
      result.classList.add('bg-red-500/10', 'text-red-400');
      result.textContent = 'Network error. Please try again.';
    }
    result.classList.remove('hidden');
  });
</script>
